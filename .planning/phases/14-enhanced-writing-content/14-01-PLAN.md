# Phase 14 Plan 1: Content Navigation Component

**Add next navigation between writing articles and case studies with loop behavior**

## Context

User needs quick navigation between content items without returning to list pages. This improves content discovery and reading flow.

## Objective

Create a reusable navigation component that:
- Shows next article/case study with thumbnail preview and title
- Appears at bottom of content (non-distracting)
- Uses subtle, editorial styling consistent with site design
- Works for both writing and case studies collections
- Loops back to first item when on last item

## Design Direction

**Placement:** Bottom of article content, before footer
**Style:** Minimal, right-aligned with subtle hover state
**Elements:**
- Small thumbnail (if coverImage exists)
- "Next" label + article title
- Right arrow icon
- Entire area clickable

**Behavior:**
- Loop to first item when on last (continuous reading flow)
- Next only (no previous - keeps it simple)

**Sort order:**
- Writing: Most recent by date first (default), with optional `sortOrder` frontmatter field for manual curation
- Case studies: Most recent by date first (default), with optional `sortOrder` frontmatter field for manual curation

## Schema Update

Add optional `sortOrder` field to both collections:
- `sortOrder: z.number().optional()` - Lower numbers appear first
- When present, sortOrder takes precedence over date
- Allows manual curation of navigation order

## Tasks

### Task 1: Update Content Schemas with sortOrder Field

**Actions:**
1. Update `src/content/config.ts`
2. Add `sortOrder: z.number().optional()` to case-studies schema
3. Add `sortOrder: z.number().optional()` to writing schema

**Success criteria:**
- Schema accepts optional sortOrder field
- Build passes with existing content (field is optional)

---

### Task 2: Create ContentNav Component

**Actions:**
1. Create `src/components/ContentNav.astro`
2. Accept props: `href`, `title`, `coverImage` (optional), `label` (default: "Next up")
3. Style with CSS custom properties for consistency
4. Include right arrow SVG inline
5. Lazy load thumbnail image
6. Handle missing thumbnail gracefully

**Component structure:**
```
                              ┌─────────────────────────┐
                              │  Next up                │
                              │  [thumb] Title Here  →  │
                              └─────────────────────────┘
```

**Success criteria:**
- Component renders with or without thumbnail
- Hover state feels editorial, not jarring
- Accessible (proper link semantics, focus states)

---

### Task 3: Integrate into Writing Detail Pages

**Actions:**
1. Update `src/pages/writing/[...slug].astro`
2. Create helper to get sorted articles (sortOrder first, then date desc)
3. Find current article index, get next (loop to first if at end)
4. Pass next item props to ContentNav
5. Position at bottom of article content

**Sort logic:**
```
1. Items with sortOrder: sort by sortOrder ascending
2. Items without sortOrder: sort by date descending
3. Items with sortOrder come before items without
```

**Success criteria:**
- Navigation appears on all writing detail pages
- Loops to first article when on last
- Links work correctly
- Styling matches site design

---

### Task 4: Integrate into Case Study Detail Pages

**Actions:**
1. Update `src/pages/work/[...slug].astro`
2. Use same sort helper logic as writing
3. Find current case study index, get next (loop to first if at end)
4. Pass next item props to ContentNav
5. Position at bottom of case study content

**Success criteria:**
- Navigation appears on all case study detail pages
- Loops to first case study when on last
- Links work correctly
- Consistent with writing implementation

---

### Task 5: Build Verification and Summary

**Actions:**
1. Run `npm run build`
2. Run `npm run astro check`
3. Visual verification on dev server
4. Create 14-01-SUMMARY.md
5. Update STATE.md and ROADMAP.md

**Success criteria:**
- Build passes
- Navigation works on all content pages
- Loop behavior works correctly
- Documentation updated

---

## Verification

- [ ] sortOrder field added to both collection schemas
- [ ] ContentNav component created and styled
- [ ] Writing pages show next article navigation with loop
- [ ] Case study pages show next case study navigation with loop
- [ ] Sort order respects sortOrder field when present
- [ ] Thumbnails lazy load correctly
- [ ] Hover/focus states work properly
- [ ] Build and type checks pass

## Notes

- Follow hyphen naming convention
- Use existing design tokens (colors, spacing, typography)
- sortOrder is optional - existing content works without changes
- Lower sortOrder numbers = earlier in sequence (1, 2, 3...)
