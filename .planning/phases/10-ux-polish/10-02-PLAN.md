---
phase: 10-ux-polish
plan: 2
type: execute
---

<objective>
Add smooth page transitions and complete accessibility audit for WCAG AA compliance.

Purpose: Enhance user experience with polished navigation animations and ensure site is fully accessible to all users including those using assistive technologies.
Output: View Transitions API integration, accessibility improvements documented, all WCAG AA issues resolved.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior phase context:**
- Phase 10-01 added 404 page and image viewer with accessibility features
- Site uses Astro framework with content collections
- Design system has established color tokens, spacing, and typography
- Target: WCAG AA compliance (Lighthouse 90+, keyboard friendly)

**View Transitions API:**
- Astro has built-in support via astro:transitions
- Provides smooth fade/slide animations between pages
- Progressive enhancement - works without JS

**Accessibility requirements from PROJECT.md:**
- WCAG AA compliance
- Keyboard friendly navigation
- Proper focus indicators
- Semantic HTML structure
- Color contrast ratios
- Screen reader support

@src/layouts/BaseLayout.astro
@src/components/Header.astro
@src/components/Footer.astro
@src/pages/index.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add View Transitions API</name>
  <files>src/layouts/BaseLayout.astro, src/styles/global.css</files>
  <action>
    Integrate Astro's View Transitions for smooth page navigation:

    **BaseLayout.astro updates:**
    - Import ViewTransitions from 'astro:transitions'
    - Add ViewTransitions component in head section
    - Configure transition mode to fade for consistent experience

    **Optional CSS customization (if needed):**
    - Add ::view-transition-old and ::view-transition-new styles
    - Keep transitions subtle and fast (200-300ms)
    - Respect prefers-reduced-motion media query

    **Test navigation paths:**
    - Home -> Work -> Case study detail
    - Home -> Writing -> Article detail
    - Home -> About
    - Home -> Contact
    - Use browser back/forward buttons

    **Progressive enhancement:**
    - Site still works without JS (transitions gracefully degrade)
    - No JavaScript errors in console
  </action>
  <verify>
    - npm run build succeeds
    - npm run dev shows smooth transitions between pages
    - Browser back/forward buttons work smoothly
    - No console errors or warnings
  </verify>
  <done>View Transitions API integrated, page navigation has smooth fade animations, works with back/forward</done>
</task>

<task type="auto">
  <name>Task 2: Accessibility audit and fixes</name>
  <files>src/layouts/BaseLayout.astro, src/components/*.astro, src/pages/*.astro, src/styles/global.css</files>
  <action>
    Perform comprehensive accessibility audit and fix issues:

    **Color contrast check:**
    - Verify all text meets WCAG AA contrast ratios (4.5:1 for normal text, 3:1 for large text)
    - Check light mode: text on background, links, muted text
    - Check dark mode: same checks
    - Fix any failing contrast ratios by adjusting color tokens

    **Keyboard navigation:**
    - Tab through entire site from top to bottom
    - Verify focus indicators visible on all interactive elements
    - Check tab order is logical (follows visual layout)
    - Ensure no keyboard traps (can exit all interactive elements)
    - Test image viewer modal (already has focus trap)
    - Test navigation menu collapse/expand if exists

    **Focus indicators:**
    - Verify :focus-visible outlines are visible and clear
    - Check color contrast of focus indicators
    - Ensure focus indicators don't rely on color alone

    **Semantic HTML:**
    - Verify heading hierarchy (h1 -> h2 -> h3, no skipping)
    - Check all images have alt text (already done in Phase 9)
    - Verify landmark regions (header, main, nav, footer)
    - Check links have descriptive text (not "click here")
    - Verify button vs link usage (buttons for actions, links for navigation)

    **ARIA labels:**
    - Check navigation has aria-label
    - Verify image viewer has proper ARIA attributes (already added)
    - Check any icon buttons have aria-label
    - Ensure no redundant ARIA (let semantic HTML do the work)

    **Form accessibility (if any forms exist):**
    - Labels associated with inputs
    - Error messages announced to screen readers
    - Required fields marked

    **Screen reader testing:**
    - Use Lighthouse accessibility audit (target: 100 score)
    - Use axe DevTools browser extension if available
    - Manually test with macOS VoiceOver or similar

    **Motion preferences:**
    - Check prefers-reduced-motion is respected
    - Disable animations for users who prefer reduced motion

    **Document fixes:**
    - Create list of issues found and how they were fixed
    - Note if any WCAG AA requirements can't be met (and why)
  </action>
  <verify>
    - npm run build succeeds
    - Lighthouse accessibility score is 90+ (ideally 100)
    - All color contrast ratios pass WCAG AA
    - Can tab through entire site without issues
    - Focus indicators clearly visible
    - Heading hierarchy is correct (no skipped levels)
    - No accessibility errors in browser console
  </verify>
  <done>Accessibility audit complete, all WCAG AA issues fixed, Lighthouse score 90+, keyboard navigation works throughout</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>View Transitions for smooth navigation and complete accessibility improvements for WCAG AA compliance</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Test page transitions:
       - Navigate: Home -> Work -> ds-bridge case study
       - Verify: Smooth fade transition between pages (not instant jump)
       - Click browser back button: Smooth transition backwards
       - Navigate: Home -> Writing -> article detail
       - Verify: Consistent smooth transitions
       - Navigate: Home -> About -> Contact
       - Test: Multiple rapid clicks (shouldn't break transitions)
    3. Test keyboard navigation:
       - Start at top of homepage
       - Press Tab repeatedly through entire page
       - Verify: Clear focus indicators on all interactive elements
       - Verify: Logical tab order (follows visual layout)
       - Navigate to case study with inline images
       - Tab to image, press Enter to open viewer
       - Press Tab in modal: Focus stays trapped in modal
       - Press ESC: Modal closes, focus returns to page
    4. Test color contrast:
       - Light mode: Check text is easily readable
       - Dark mode: Check text is easily readable
       - Links should be clearly distinguishable
    5. Run Lighthouse audit:
       - Open DevTools -> Lighthouse
       - Run: Desktop, Categories: Accessibility only
       - Target: Score of 90+ (ideally 100)
       - Review any warnings or issues
    6. Test with keyboard only (no mouse):
       - Try to complete full navigation without mouse
       - Verify all interactive elements reachable
       - Verify all actions can be triggered (Enter/Space)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds without errors
- [ ] Page transitions work smoothly (fade animation between pages)
- [ ] Lighthouse accessibility score is 90+
- [ ] All color contrast ratios pass WCAG AA (4.5:1 normal, 3:1 large)
- [ ] Keyboard navigation works throughout site
- [ ] Focus indicators clearly visible
- [ ] Heading hierarchy correct (no skipped levels)
- [ ] All images have alt text
- [ ] Image viewer modal has proper keyboard support
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- View Transitions provide smooth, subtle page navigation
- WCAG AA compliance achieved (Lighthouse 90+)
- No accessibility regressions from new features
- Site is fully keyboard navigable
</success_criteria>

<output>
After completion, create `.planning/phases/10-ux-polish/10-02-SUMMARY.md`:

# Phase 10 Plan 2: Transitions & Accessibility Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- View Transitions API for smooth page navigation
- WCAG AA compliance achieved (Lighthouse accessibility score: X)
- Keyboard navigation improvements
- Color contrast fixes (if any)
- Focus indicator enhancements (if any)

## Files Created/Modified

- `src/layouts/BaseLayout.astro` - View Transitions integration
- [Any other files modified during accessibility fixes]

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 10 complete, ready for Phase 11 (Documentation)
</output>
