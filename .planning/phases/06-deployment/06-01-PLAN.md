---
phase: 06-deployment
plan: 01
type: execute
---

<objective>
Deploy the portfolio site to GitHub Pages with custom domain configuration.

Purpose: Make the portfolio live and accessible at chaddunbar.com.
Output: Live site at https://chaddunbar.com with automated deployment on push to main.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@astro.config.mjs
@package.json

**Prior decisions affecting this phase:**
- GitHub Pages hosting (from Init decision)
- Custom domain via GoDaddy (from constraints)
- Static output mode already configured in Astro

**Repository info:**
- Remote: https://github.com/chadwd/port-temp.git
- Custom domain: chaddunbar.com (apex domain)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure Astro and create GitHub Actions workflow</name>
  <files>astro.config.mjs, .github/workflows/deploy.yml, public/CNAME</files>
  <action>
    **Part A: Update astro.config.mjs**
    - Change `site` from placeholder to `https://chaddunbar.com`
    - Remove any `base` config (not needed for apex domain with custom domain)
    - Keep existing integrations (sitemap)

    **Part B: Create GitHub Actions workflow**
    Create `.github/workflows/deploy.yml` with the official Astro GitHub Pages workflow:
    - Trigger on push to main branch
    - Use `withastro/action@v3` for build
    - Use `actions/deploy-pages@v4` for deployment
    - Set proper permissions (contents: read, pages: write, id-token: write)

    **Part C: Add CNAME file**
    Create `public/CNAME` containing just `chaddunbar.com` (no https, no trailing newline issues)
    This file gets copied to dist/ during build, telling GitHub Pages about the custom domain.
  </action>
  <verify>
    - npm run build succeeds
    - dist/CNAME exists and contains chaddunbar.com
    - .github/workflows/deploy.yml exists with correct structure
  </verify>
  <done>Astro configured for chaddunbar.com, GitHub Actions workflow ready, CNAME file in place</done>
</task>

<task type="auto">
  <name>Task 2: Push and enable GitHub Pages</name>
  <files>N/A (git operations)</files>
  <action>
    **Part A: Commit and push deployment configuration**
    - Stage all deployment-related changes
    - Commit with message: "feat(deploy): add GitHub Actions workflow and custom domain config"
    - Push to origin/main

    **Part B: Enable GitHub Pages via gh CLI**
    Run: `gh repo edit --enable-pages` (if not already enabled)

    **Part C: Configure Pages source**
    GitHub Actions workflow will handle this automatically on first run.
    The workflow uses the GitHub Pages deployment action which creates the gh-pages environment.

    **Part D: Wait for initial deployment**
    Check workflow status: `gh run list --workflow=deploy.yml`
    The first deployment may take 1-2 minutes.
  </action>
  <verify>
    - `gh run list --workflow=deploy.yml` shows successful run
    - `gh api repos/chadwd/port-temp/pages` returns pages configuration
  </verify>
  <done>Changes pushed, GitHub Actions workflow triggered and succeeded</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <action>Configure DNS at GoDaddy for apex domain</action>
  <instructions>
    I've deployed the site to GitHub Pages. Now you need to configure DNS at GoDaddy.

    **Go to GoDaddy DNS Management for chaddunbar.com and add these records:**

    **A Records (for apex domain chaddunbar.com):**
    Delete any existing A records, then add these four:
    ```
    Type: A    Name: @    Value: 185.199.108.153
    Type: A    Name: @    Value: 185.199.109.153
    Type: A    Name: @    Value: 185.199.110.153
    Type: A    Name: @    Value: 185.199.111.153
    ```

    **CNAME Record (for www subdomain):**
    ```
    Type: CNAME    Name: www    Value: chadwd.github.io
    ```

    **DNS propagation takes 5-30 minutes** (sometimes up to 24 hours, but usually fast).

    You can check propagation at: https://dnschecker.org/#A/chaddunbar.com
  </instructions>
  <verification>
    After DNS propagates:
    - `dig chaddunbar.com +short` returns GitHub Pages IPs
    - `dig www.chaddunbar.com +short` returns chadwd.github.io
  </verification>
  <resume-signal>Type "done" when DNS records are configured</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Portfolio deployed to https://chaddunbar.com</what-built>
  <how-to-verify>
    1. Visit https://chaddunbar.com
    2. Confirm: Homepage loads with case studies and writing sections
    3. Confirm: HTTPS is working (padlock icon in browser)
    4. Confirm: Navigation works (click through Work, Writing, About, Contact)
    5. Confirm: Dark mode toggle works (if system preference changes)
    6. Visit https://www.chaddunbar.com - should redirect to apex domain

    **If site doesn't load yet:**
    - DNS may still be propagating (wait 15-30 min)
    - Check GitHub repo Settings > Pages for any errors
    - Check Actions tab for workflow status
  </how-to-verify>
  <resume-signal>Type "approved" if site works, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Site accessible at https://chaddunbar.com
- [ ] HTTPS certificate active (GitHub auto-provisions)
- [ ] All pages load correctly
- [ ] GitHub Actions workflow runs on push to main
- [ ] www.chaddunbar.com works (redirects or serves content)
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Portfolio live at custom domain
- Automated deployment pipeline working
- Phase 6 complete, project complete
</success_criteria>

<output>
After completion, create `.planning/phases/06-deployment/06-01-SUMMARY.md`:

# Phase 6 Plan 1: Deployment Summary

**[Portfolio deployed to https://chaddunbar.com with automated GitHub Actions pipeline]**

## Performance

- **Duration:** [X min]
- **Started:** [timestamp]
- **Completed:** [timestamp]
- **Tasks:** 4 (2 auto, 2 checkpoints)

## Accomplishments
- Configured Astro for custom domain deployment
- Created GitHub Actions workflow for automated builds
- Enabled GitHub Pages with custom domain
- Configured DNS at GoDaddy
- Site live at https://chaddunbar.com

## Files Created/Modified
- `astro.config.mjs` - Updated site URL
- `.github/workflows/deploy.yml` - Automated deployment workflow
- `public/CNAME` - Custom domain configuration

## Decisions Made
[Any decisions, or "None - followed standard GitHub Pages setup"]

## Issues Encountered
[DNS propagation delays or other issues, or "None"]

## Next Step
Project complete! Portfolio is live.

---
*Phase: 06-deployment*
*Completed: [date]*
</output>
