---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import CaseStudyCard from '../../components/CaseStudyCard.astro';

const allCaseStudies = await getCollection('case-studies');
const sortedCaseStudies = allCaseStudies.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const pageTitle = 'Work';
const pageDescription = 'Case studies and projects showcasing product design work in AI and blockchain innovation.';
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <div class="container">
    <header class="work-header">
      <h1>Work</h1>
      <p class="intro">Case studies showcasing product design work in AI and blockchain innovation.</p>
    </header>

    {sortedCaseStudies.length === 0 ? (
      <p class="empty-state">No case studies available yet. Check back soon.</p>
    ) : (
      <div class="case-studies-grid">
        {sortedCaseStudies.map((caseStudy) => (
          <CaseStudyCard
            title={caseStudy.data.title}
            description={caseStudy.data.description}
            slug={caseStudy.slug}
            date={caseStudy.data.date}
            confidentiality={caseStudy.data.confidentiality}
            tags={caseStudy.data.tags}
          />
        ))}
      </div>
    )}
  </div>
</BaseLayout>

<style>
  .work-header {
    margin-bottom: var(--space-12);
  }

  .intro {
    font-size: var(--text-lg);
    color: var(--color-text-muted);
    max-width: var(--max-width-content);
    margin-bottom: 0;
  }

  .empty-state {
    color: var(--color-text-muted);
    font-style: italic;
  }

  .case-studies-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-6);
  }

  @media (min-width: 768px) {
    .case-studies-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
</style>
